{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Schema",
  "type": "object",
  "properties": {
    "pgProviders": {
      "description": "PG사 식별자 목록",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/PgProvider"
      }
    },
    "resources": {
      "description": "리소스 목록",
      "$ref": "#/$defs/Resource"
    },
    "methods": {
      "description": "메소드 목록",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/Method"
      }
    }
  },
  "required": [
    "pgProviders",
    "resources",
    "methods"
  ],
  "$defs": {
    "PgProvider": {
      "type": "object",
      "properties": {
        "description": {
          "description": "PG사 설명",
          "type": "string"
        }
      },
      "required": [
        "description"
      ]
    },
    "Resource": {
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/Resource"
          }
        },
        {
          "$ref": "#/$defs/Parameter"
        }
      ]
    },
    "Parameter": {
      "description": "파라미터 타입",
      "type": "object",
      "properties": {
        "name": {
          "description": "파라미터 이름",
          "type": [
            "string",
            "null"
          ]
        },
        "description": {
          "description": "파라미터 설명",
          "type": [
            "string",
            "null"
          ]
        },
        "optional": {
          "description": "Optional 여부",
          "type": "boolean"
        },
        "flagOptions": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/FlagOption"
          }
        },
        "deprecated": {
          "description": "Deprecated 여부",
          "type": "boolean"
        }
      },
      "oneOf": [
        {
          "title": "string",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "string"
            }
          },
          "required": [
            "type"
          ]
        },
        {
          "title": "stringLiteral",
          "type": "object",
          "properties": {
            "value": {
              "description": "StringLiteral의 값",
              "type": "string"
            },
            "type": {
              "type": "string",
              "const": "stringLiteral"
            }
          },
          "required": [
            "type",
            "value"
          ]
        },
        {
          "title": "integer",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "integer"
            }
          },
          "required": [
            "type"
          ]
        },
        {
          "title": "boolean",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "boolean"
            }
          },
          "required": [
            "type"
          ]
        },
        {
          "title": "array",
          "type": "object",
          "properties": {
            "items": {
              "description": "Array의 item 타입",
              "$ref": "#/$defs/Parameter"
            },
            "hide_if_empty": {
              "description": "Array가 비어있을 때 숨기기 여부",
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "const": "array"
            }
          },
          "required": [
            "type",
            "items"
          ]
        },
        {
          "title": "object",
          "type": "object",
          "properties": {
            "properties": {
              "description": "Object의 프로퍼티 목록",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/Parameter"
              }
            },
            "hideIfEmpty": {
              "description": "Object가 비어있을 때 숨기기 여부",
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "const": "object"
            }
          },
          "required": [
            "type",
            "properties"
          ]
        },
        {
          "title": "emptyObject",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "emptyObject"
            }
          },
          "required": [
            "type"
          ]
        },
        {
          "title": "enum",
          "type": "object",
          "properties": {
            "variants": {
              "description": "Enum의 variant 목록",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/EnumVariant"
              }
            },
            "valuePrefix": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "const": "enum"
            }
          },
          "required": [
            "type",
            "variants"
          ]
        },
        {
          "title": "oneOf",
          "type": "object",
          "properties": {
            "properties": {
              "description": "OneOf의 타입 목록",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/Parameter"
              }
            },
            "hideIfEmpty": {
              "description": "OneOf가 비어있을 때 숨기기 여부",
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "const": "oneOf"
            }
          },
          "required": [
            "type",
            "properties"
          ]
        },
        {
          "title": "union",
          "type": "object",
          "properties": {
            "types": {
              "description": "Union의 타입 목록",
              "type": "array",
              "items": {
                "$ref": "#/$defs/Parameter"
              }
            },
            "hideIfEmpty": {
              "description": "Union이 비어있을 때 숨기기 여부",
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "const": "union"
            }
          },
          "required": [
            "type",
            "types"
          ]
        },
        {
          "title": "intersection",
          "type": "object",
          "properties": {
            "types": {
              "description": "Intersection의 타입 목록",
              "type": "array",
              "items": {
                "$ref": "#/$defs/Parameter"
              }
            },
            "hideIfEmpty": {
              "description": "Intersection이 비어있을 때 숨기기 여부",
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "const": "intersection"
            }
          },
          "required": [
            "type",
            "types"
          ]
        },
        {
          "title": "resourceRef",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "resourceRef"
            }
          },
          "$ref": "#/$defs/ResourceRef",
          "required": [
            "type"
          ]
        },
        {
          "title": "error",
          "type": "object",
          "properties": {
            "transactionType": {
              "type": [
                "string",
                "null"
              ]
            },
            "properties": {
              "description": "Error의 프로퍼티 목록",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/Parameter"
              }
            },
            "type": {
              "type": "string",
              "const": "error"
            }
          },
          "required": [
            "type",
            "properties"
          ]
        },
        {
          "title": "json",
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "json"
            }
          },
          "required": [
            "type"
          ]
        }
      ]
    },
    "EnumVariant": {
      "type": "object",
      "properties": {
        "description": {
          "description": "Enum variant 설명",
          "type": [
            "string",
            "null"
          ]
        },
        "alias": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "ResourceRef": {
      "type": "object",
      "properties": {
        "$ref": {
          "type": "string"
        }
      },
      "required": [
        "$ref"
      ]
    },
    "FlagOption": {
      "type": "object",
      "properties": {
        "visible": {
          "description": "Visible 여부",
          "type": "boolean"
        }
      }
    },
    "Method": {
      "type": "object",
      "properties": {
        "description": {
          "description": "메소드 설명",
          "type": [
            "string",
            "null"
          ]
        },
        "input": {
          "description": "메소드 입력 파라미터",
          "$ref": "#/$defs/Parameter"
        },
        "callbacks": {
          "description": "메소드 콜백 목록",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/Callback"
          }
        },
        "output": {
          "description": "메소드 출력 파라미터",
          "anyOf": [
            {
              "$ref": "#/$defs/Parameter"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "input"
      ]
    },
    "Callback": {
      "type": "object",
      "properties": {
        "description": {
          "description": "콜백 설명",
          "type": [
            "string",
            "null"
          ]
        },
        "input": {
          "description": "콜백 입력 파라미터",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/Parameter"
          }
        }
      },
      "required": [
        "input"
      ]
    }
  }
}